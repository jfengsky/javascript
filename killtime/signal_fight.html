<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>fly fire</title>
  <script src="libs/jquery-2.0.0.js"></script>
  <link rel="stylesheet" type="text/css" href="assets/css/style.css"/>
  <style type="text/css">
    .magic{
      height:20px;
      width:20px;
      border-radius:20px;
      background:#06f;
      position:absolute;
      left:80px;
      top:320px;
      opacity:0;
    }
    @-webkit-keyframes magicattack{
      0% {
        opacity:0.5;
        top:300px;
        -webkit-transform: scale(1.2,1.2);
      }
      25% {
        opacity:1;
        top:260px;
        -webkit-transform: scale(1.4, 1.4);
      }
      50% {
        opacity:1;
        top:220px;
        -webkit-transform: scale(1.6,1.6);
      }
      75%{
        opacity:1;
        top:180px;
        -webkit-transform: scale(1.8,1.8);
      }
      100% {
        opacity:1;
        top:140px;
        -webkit-transform: scale(2,2);
      }
    }
    @-webkit-keyframes partner_attack{
      0%{
        bottom:5px;
      }
      25%{
        bottom:5px;
        -webkit-transform: rotate(-5deg);
      }
      50%{
        bottom:5px;
        -webkit-transform: rotate(0deg);
      }
      75%{
        bottom:5px;
        -webkit-transform: rotate(5deg);
      }
      100%{
        bottom:5px;
      }
    }
    @-webkit-keyframes enemy_attack{
      0%{
        top:5px;
      }
      25%{
        top:5px;
        -webkit-transform: rotate(-5deg);
      }
      50%{
        top:5px;
        -webkit-transform: rotate(0deg);
      }
      75%{
        top:5px;
        -webkit-transform: rotate(5deg);
      }
      100%{
        top:5px;
      }
    }

    @-webkit-keyframes fontflick{
      0% {
        opacity:1;
        font-size:36px;
      }
      25% {
        font-size:42px;
      }
      50% {
        font-size:48px;
      }
      75%{
        font-size:42px;
      }
      100% {
        opacity:1;
        font-size:36px;
      }
    }
    .red{
      color:#f00;
    }
      /* partner attack animate */
    .paa{
      -webkit-animation: partner_attack 0.15s;
    }
    .eaa{
      -webkit-animation: enemy_attack 0.15s;
    }
    .fire{
      -webkit-animation:magicattack 0.2s;
    }
    .blood{
      font-family:'arial';
      font-size:30px;
      font-weight:bold;
      text-shadow:1px 1px 2px #000;
      position: absolute;
      /*animation: fontflick 0.3s;*/
      -webkit-animation: fontflick 0.3s;
    }
  </style>
</head>
<body style="padding:20px;">
<div class="main">
  <div class="enemy">
    <ul>
      <li id="em1">
        <div class="role">
          abcd
        </div>
      </li>
    </ul>
    <div class="red" style="opacity:0" id="emblood">0</div>
  </div>
  <div class="partner">
    <ul>
      <li id="tm1">
        <div class="role">
          abcd
        </div>
      </li>
    </ul>
  </div>
  <div class="magic" id="tmg1">

  </div>
</div>
<input type="button" value="start" id="J_start"/>
<script type="text/javascript">
(function($){
  $('#J_start').bind('click', function(){
    // team attak
    $('#tm1 .role').queue(function(){
      $(this).addClass('paa');
      $(this).dequeue();
    }).delay(200).queue(function(){
      $(this).removeClass('paa');
      $(this).dequeue();
    });
    // magic show
    $('#tmg1').queue(function(){
      // TODO创建dom
      var self = this;
      setTimeout(function(){
        $(self).addClass('fire');
      }, 100);
      $(this).dequeue();
    }).delay(400).queue(function(){
      $(this).removeClass('fire');
      // TODO 删除dom
      $(this).dequeue();
    });

    // enemy move
    $('#em1 .role').queue(function(){
      var self = this;
      setTimeout(function(){
        $(self).addClass('eaa');
      }, 400);
      $(this).dequeue();
    }).delay(200).queue(function(){
      $(this).removeClass('eaa');
      $(this).dequeue();
    });
    // blood numbers show
    $('#emblood').queue(function(){
      var self = this;
      $(this).css({
        left:40,
        top:120
      });
      var blood = Math.ceil(Math.random()*10000);
      $(this).text(blood);
      setTimeout(function(){
        $(self).addClass('blood');
      },350);
      $(this).dequeue();
    }).delay(1000).queue(function(){
      $(this).removeClass('blood');
      $(this).dequeue();
    });

  });
})(jQuery)
</script>
</body>
</html>